# ----------------------------------------------------------------------------
#
#  Welcome to Baml! To use this generated code, please run the following:
#
#  $ pip install baml
#
# ----------------------------------------------------------------------------

# This file was generated by BAML: please do not edit it. Instead, edit the
# BAML files and re-generate this code using: baml-cli generate
# baml-cli is available with the baml package.

_file_map = {

    "main.baml": "// BAML configuration for story extraction\n\nclient<llm> GPT4o {\n  provider openai\n  options {\n    model \"gpt-4o-2024-08-06\"\n    api_key env.OPENAI_API_KEY\n    temperature 0\n  }\n}\n\nclient<llm> GPT4oMini {\n  provider openai\n  options {\n    model \"gpt-4o-mini\"\n    api_key env.OPENAI_API_KEY\n    temperature 0\n  }\n}\n\n// Auto-resolve to best available model (GPT-5)\nclient<llm> AutoModel {\n  provider openai\n  options {\n    model \"gpt-5\"\n    api_key env.OPENAI_API_KEY\n    reasoning_effort \"medium\"\n  }\n}\n\nclass DateInfo {\n  asserted_text string? @description(\"Original date text from chapter\")\n  parsed string? @description(\"Parsed date in EDTF-ish format, e.g., '1984-03~'\")\n  precision string? @description(\"Precision: year, month, day, quarter, decade\")\n}\n\nclass Location {\n  place_name string @description(\"Name of the place\")\n  lat float? @description(\"Latitude\")\n  lon float? @description(\"Longitude\")\n  place_type string? @description(\"Type of place: office, lab, factory, etc.\")\n  geo_precision string? @description(\"building, campus, city, region\")\n  visitability string? @description(\"public, private, historical\")\n  note string? @description(\"Additional context\")\n}\n\nclass Person {\n  name string @description(\"Person's name\")\n  role_at_time string? @description(\"Role at the time of the story\")\n  team string? @description(\"Team or department\")\n  affiliation string? @description(\"Company or organization\")\n}\n\nclass Product {\n  product_line string? @description(\"Product line\")\n  model string? @description(\"Model name or number\")\n  codename string? @description(\"Internal codename\")\n  generation string? @description(\"Generation or version\")\n  design_language string? @description(\"Design language or style\")\n}\n\nclass Company {\n  name string @description(\"Company name\")\n  relationship string? @description(\"Relationship to the story: beneficiary, competitor, partner, etc.\")\n}\n\nclass Provenance {\n  source_type string @description(\"Type of source: book, interview, memo, etc.\")\n  citation string? @description(\"Citation text\")\n  isbn string? @description(\"ISBN if book source\")\n  author string? @description(\"Author of source\")\n  pub_year int? @description(\"Publication year\")\n  quote_snippet string? @description(\"Direct quote from source\")\n}\n\nclass Relationships {\n  contradicts string[]? @description(\"Story IDs this contradicts\")\n  references string[]? @description(\"Story IDs this references\")\n  precedes string[]? @description(\"Story IDs this precedes\")\n}\n\nclass Media {\n  asset_type string @description(\"Type: photo, video, document, etc.\")\n  uri string? @description(\"URI to the asset\")\n  credit string? @description(\"Credit/attribution\")\n  license string? @description(\"License type\")\n  date string? @description(\"Date of asset\")\n}\n\nclass Story {\n  story_id string @description(\"Use 'auto_or_uuid' to auto-generate\")\n  title string @description(\"Short descriptive title\")\n  summary string @description(\"2-3 sentence neutral summary\")\n  dates DateInfo? @description(\"Date information\")\n  locations Location[]? @description(\"Locations mentioned in the story\")\n  forward_locale Location? @description(\"Forward-looking location where impact occurred\")\n  people Person[]? @description(\"People involved\")\n  products Product[]? @description(\"Products mentioned\")\n  companies Company[]? @description(\"Companies involved\")\n  event_type string[]? @description(\"Event types: DesignDecision, Prototype, ProductLaunch, etc.\")\n  themes string[]? @description(\"Themes: innovation, conflict, partnership, etc.\")\n  tone string[]? @description(\"Tone: triumphant, tense, nostalgic, etc.\")\n  business_phase string? @description(\"Business phase or era\")\n  era string? @description(\"Era description\")\n  relationships Relationships? @description(\"Relationships to other stories\")\n  provenance Provenance[]? @description(\"Source citations\")\n  confidence float @description(\"Confidence score 0-1\")\n  freeform_tags string[]? @description(\"Freeform tags\")\n  media Media[]? @description(\"Media assets\")\n}\n\nfunction ExtractStories(chapter_text: string, book_context: string) -> Story[] {\n  client AutoModel\n  prompt #\"\n    You are extracting structured stories from a chapter of a book about Apple Computer history.\n\n    Book context: {{ book_context }}\n\n    Chapter text:\n    ---\n    {{ chapter_text }}\n    ---\n\n    Instructions:\n    1. Extract 0 or more Story objects from this chapter\n    2. Each story must be grounded in the chapter text - no external knowledge\n    3. Use \"auto_or_uuid\" for story_id to auto-generate\n    4. Require provenance for non-trivial claims\n    5. Be conservative with confidence scores\n    6. Extract only factual information, not speculation\n    7. For dates, capture the original text and attempt parsing\n    8. For locations - ALWAYS extract place names mentioned in text:\n       - place_name: REQUIRED - extract the location name\n       - lat/lon: OPTIONAL - provide coordinates when possible:\n         * If text has exact coordinates → use them, set geo_precision: \"exact\"\n         * For well-known places (major cities, famous buildings, company headquarters) → provide approximate coordinates from your knowledge\n         * Set geo_precision appropriately: \"approximate-building\" (for specific buildings), \"approximate-city\" (for cities), \"approximate-region\" (for regions/states)\n         * For unknown/ambiguous places → leave lat/lon null\n       - note: REQUIRED - always include original text context (e.g., \"Apple headquarters in Cupertino, California\" or \"Foxconn factory in Shenzhen\")\n         This preserves information for future precise geocoding\n       - place_type: factory, headquarters, city, campus, office, lab, etc.\n       Examples:\n         * \"Cupertino\" → lat: 37.323, lon: -122.032, geo_precision: \"approximate-city\", note: \"Cupertino, California\"\n         * \"Apple Park\" → lat: 37.335, lon: -122.009, geo_precision: \"approximate-building\", note: \"Apple Park headquarters, Cupertino\"\n         * \"Fountain, Colorado\" → lat: 38.682, lon: -104.701, geo_precision: \"approximate-city\", note: \"Fountain, Colorado\"\n    9. For people, extract names and roles when mentioned\n    10. For companies, extract names and their relationship to the story\n    11. For products, extract product names and details\n    12. Extract themes, event_type, and tone when evident from the narrative\n    13. Return an empty array if no significant stories are found\n\n    Return a JSON array of Story objects matching the schema.\n  \"#\n}",
}

def get_baml_files():
    return _file_map