{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "array",
  "items": {
    "type": "object",
    "required": ["story_id", "title", "summary"],
    "properties": {
      "story_id": {
        "type": "string",
        "description": "Unique identifier; use 'auto_or_uuid' to let tool generate deterministic UUID"
      },
      "title": {
        "type": "string",
        "description": "Short descriptive label for the story"
      },
      "summary": {
        "type": "string",
        "description": "Compelling 200-350 character story excerpt for map pins. Front-load drama/conflict/scale with vivid details. Provide context for readers who skimmed the book."
      },
      "dates": {
        "type": "object",
        "properties": {
          "asserted_text": {
            "type": "string",
            "description": "ALWAYS capture original date text verbatim from chapter. Examples: 'spring 1984', 'early 1980s', 'late March 1996', 'summer of 1997'"
          },
          "parsed": {
            "type": "string",
            "description": "ISO 8601 EDTF format with markers: '1984-03~' (approx), '1984?' (uncertain), '1984-03/1984-06' (range), '198X' (1980s), '1984-XX' (unspecified)"
          },
          "precision": {
            "type": "string",
            "enum": ["day", "month", "year", "decade", "range"],
            "description": "Auto-filled from parsed format: 'day' (1984-03-15), 'month' (1984-03~), 'year' (1984~), 'decade' (198X), 'range' (1984-03/1984-06)"
          }
        }
      },
      "locations": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "place_name": {
              "type": "string",
              "description": "Name of the place (required)"
            },
            "lat": {
              "type": "number",
              "description": "Latitude coordinate (optional - provide for well-known places)"
            },
            "lon": {
              "type": "number",
              "description": "Longitude coordinate (optional - provide for well-known places)"
            },
            "place_type": {
              "type": "string",
              "description": "Type of place: factory, headquarters, city, campus, office, lab, restaurant, hotel, etc."
            },
            "geo_precision": {
              "type": "string",
              "description": "Precision: 'exact' (from text), 'approximate-building', 'approximate-city', 'approximate-region', or null"
            },
            "visitability": {
              "type": "string",
              "description": "public, private, historical"
            },
            "note": {
              "type": "string",
              "description": "Rich contextual details for future geocoding: temporal markers (years active), functional details (sq ft, purpose), named entities (ownership), scale, story significance. Example: 'Fremont factory (1984-1996). $20M state-of-the-art facility, 27-sec cycle time. Closed due to Mac sales collapse, workforce laid off.'"
            }
          }
        }
      },
      "forward_locale": {
        "type": "object",
        "properties": {
          "place_name": {
            "type": "string",
            "description": "Name of the forward-looking location"
          },
          "lat": {
            "type": "number",
            "description": "Latitude coordinate (optional)"
          },
          "lon": {
            "type": "number",
            "description": "Longitude coordinate (optional)"
          },
          "place_type": {
            "type": "string",
            "description": "Type of place: factory, headquarters, city, campus, market, etc."
          },
          "geo_precision": {
            "type": "string",
            "description": "Precision: 'exact', 'approximate-building', 'approximate-city', 'approximate-region', or null"
          },
          "visitability": {
            "type": "string",
            "description": "public, private, historical"
          },
          "note": {
            "type": "string",
            "description": "Rich contextual details: temporal markers, functional details, named entities, scale, story significance"
          }
        }
      },
      "people": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "role_at_time": {"type": "string"},
            "team": {"type": "string"},
            "affiliation": {"type": "string"}
          }
        }
      },
      "products": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "product_line": {"type": "string"},
            "model": {"type": "string"},
            "codename": {"type": "string"},
            "generation": {"type": "string"},
            "design_language": {"type": "string"}
          }
        }
      },
      "companies": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "relationship": {"type": "string"}
          }
        }
      },
      "event_type": {
        "type": "array",
        "items": {"type": "string"}
      },
      "themes": {
        "type": "array",
        "items": {"type": "string"}
      },
      "tone": {
        "type": "array",
        "items": {"type": "string"}
      },
      "business_phase": {"type": "string"},
      "era": {"type": "string"},
      "relationships": {
        "type": "object",
        "properties": {
          "contradicts": {"type": "array", "items": {"type": "string"}},
          "references": {"type": "array", "items": {"type": "string"}},
          "precedes": {"type": "array", "items": {"type": "string"}}
        }
      },
      "provenance": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "source_type": {"type": "string"},
            "citation": {"type": "string"},
            "isbn": {"type": "string"},
            "author": {"type": "string"},
            "pub_year": {"type": "integer"},
            "quote_snippet": {"type": "string"}
          }
        }
      },
      "confidence": {
        "type": "number",
        "minimum": 0,
        "maximum": 1
      },
      "freeform_tags": {
        "type": "array",
        "items": {"type": "string"}
      },
      "media": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "asset_type": {"type": "string"},
            "uri": {"type": "string"},
            "credit": {"type": "string"},
            "license": {"type": "string"},
            "date": {"type": "string"}
          }
        }
      }
    }
  }
}